## 延迟累进保底制

知名游戏中有明日方舟和原神使用了这种机制

第 $i$ 次获得的概率总是等于之前全都没获得的概率之积, 乘上本次获得的概率:

$$ g_i = p_i \prod_{j=1}^{i-1} (1 - p_j) $$

---

也就是说从第 51 次开始, 到第 99% 次

那么此时函数 $p_i$ 就是一个二分段函数.

$$p_i = \begin{cases}
0.02&i<50\\
0.02i-0.98& 50<i<99\\
\end{cases}$$

```mathematica
Clear["`*"]
max = 99;
P[i_] := P[i] = If[i < 50, 1 / 50, (i - 50) / 50]
G[i_] := G[i] = P[i] * Times @@ (1 - P /@ Range[i - 1])
N[# * G[#] & /@ Range[max] // Tr]
success = Quiet@ N[G /@ Range[max]];
Transpose@{Range@max, Accumulate@success} // TableForm
```

| 抽卡次数 |    成功概率 |    累计概率 |  无保底累计 |   伪随机累计 |
|-----:|--------:|--------:|-------:|--------:|
|  十连抽 | 18.293% |  18.29% | 18.29% |  43.47% |
|  二十连 | 14.946% |  33.24% | 33.24% |  89.57% |
|  三十连 | 12.212% |  45.45% | 45.45% |  99.45% |
|  四十连 |  9.978% |  55.43% | 55.43% |  99.99% |
|  五十连 |  8.153% |  63.58% | 63.58% | 100.00% |
|  六十连 | 27.566% |  91.15% | 70.24% | 100.00% |
|  七十连 |  8.696% |  99.84% | 75.69% | 100.00% |
|  八十连 |  0.155% | 100.00% | 80.13% | 100.00% |
|  九十连 |  0.000% | 100.00% | 86.74% | 100.00% |
|  一百连 |  0.000% | 100.00% | 86.74% | 100.00% |

注: 1/50 的等价伪随机因子是 0.000703625

这是一种很好的策略


