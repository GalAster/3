

## 无保底机制

我们先来看下 $10\%$ 概率, 却能十发不出的.

## 保底盒子法

> 取一个盒子, 把你的保底放进去, 摇匀.
>
> 那么保底一定在这个盒子里.

具体实现的时候盒子就是一个数组.

然后把很多盒子放在一起组成一个池子, 或者说大数组, 玩家就从这个序列里开始查表.

一人一池不至于, 可能一个时段的请求会分流到很多个池子.

这样的游戏是有垫刀之说的, 而且玩家之间存在竞争.

一般用在滚服游戏里, 而且出了 SSR 一定要系统公告广播

因为要加锁, 所以性能低下.

> 啥, 您用 python 写的?
>
> 大家都加锁等于都不加锁, 您就是爷!


## 硬保底制

> 你尽管抽, 没出, 那我给你就是.

这就是**硬保底制**.

我们把平均来说的这个概率称为**综合概率**, 每次抽中的这个概率称为**原始概率**.

### 1.6 法则

显然综合概率 > 原始概率, 所以需要精算一下具体超了多少.

在估算中, 我们可以使用 1.6 法则, 也就是原始概率乘以 1.6 来估算综合概率.

若原始概率是 $25\%$, 保底要 $4$ 次, 综合概率约 $40%$, 期望是 $2.5$ 次.

若原始概率是 $5\%$, 保底要二十次, 综合概率约 $8\%$, 期望是 $2.5$ 次.

若原始概率是 $1\%$, 保底要一百次, 综合概率约 $1.6\%$, 期望是 $2.5$ 次.

### 数学推算

直接取最后一次

$$E(a)=\sum _{i=1}^{\left\lceil 1/a\right\rceil } i\times a (1-a)^{i-1}
=\frac{1}{a}\left(1-(1-a)^{\left\lceil 1/a\right\rceil } \left(a\times \left\lceil1/a\right\rceil +1\right)\right)$$

$$E(a)=\frac{1}{a}\left(1-2 (1-a)^{1/a}\right)$$

$$p(a) = \frac{a}{1-2 \sqrt[a]{1-a}}$$


### 1.6 法则推导


### 硬保底总结

硬保底的缺点是太硬了, 玩家感知太强烈, 不是那么的随机, 和施舍给你似的.

因此发展出了不是那么硬的累进保底制, 简称为软保底.


